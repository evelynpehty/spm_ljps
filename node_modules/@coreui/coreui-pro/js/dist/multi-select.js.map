{"version":3,"file":"multi-select.js","sources":["../src/multi-select.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI PRO (v4.3.4): multi-select.js\n * License (https://coreui.io/pro/license-new/)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin } from './util/index'\nimport Data from './dom/data'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\nimport BaseComponent from './base-component'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'multi-select'\nconst DATA_KEY = 'coreui.multi-select'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst TAB_KEY = 'Tab'\nconst RIGHT_MOUSE_BUTTON = 2\n\nconst SELECTOR_INPUT = '.form-multi-select-search'\nconst SELECTOR_OPTGROUP = '.form-multi-select-optgroup'\nconst SELECTOR_OPTION = '.form-multi-select-option'\nconst SELECTOR_OPTIONS = '.form-multi-select-options'\nconst SELECTOR_OPTIONS_EMPTY = '.form-multi-select-options-empty'\nconst SELECTOR_SELECT = '.form-multi-select'\nconst SELECTOR_SELECTION = '.form-multi-select-selection'\nconst SELECTOR_SELECTION_CLEANER = '.form-multi-select-selection-cleaner'\n\nconst EVENT_CHANGED = `changed${EVENT_KEY}`\nconst EVENT_CLICK = `click${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_KEYUP = `keyup${EVENT_KEY}`\nconst EVENT_SEARCH = `search${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `showN${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_DISABLED = 'disabled'\nconst CLASS_NAME_SELECT = 'form-multi-select'\nconst CLASS_NAME_SELECT_DROPDOWN = 'form-multi-select-dropdown'\nconst CLASS_NAME_SELECT_MULTIPLE = 'form-multi-select-multiple'\nconst CLASS_NAME_SELECT_WITH_CLEANER = 'form-multi-select-with-cleaner'\nconst CLASS_NAME_SELECT_ALL = 'form-multi-select-all'\nconst CLASS_NAME_OPTGROUP = 'form-multi-select-optgroup'\nconst CLASS_NAME_OPTGROUP_LABEL = 'form-multi-select-optgroup-label'\nconst CLASS_NAME_OPTION = 'form-multi-select-option'\nconst CLASS_NAME_OPTION_WITH_CHECKBOX = 'form-multi-select-option-with-checkbox'\nconst CLASS_NAME_OPTIONS = 'form-multi-select-options'\nconst CLASS_NAME_OPTIONS_EMPTY = 'form-multi-select-options-empty'\nconst CLASS_NAME_SEARCH = 'form-multi-select-search'\nconst CLASS_NAME_SELECTED = 'form-multi-selected'\nconst CLASS_NAME_SELECTION = 'form-multi-select-selection'\nconst CLASS_NAME_SELECTION_CLEANER = 'form-multi-select-selection-cleaner'\nconst CLASS_NAME_SELECTION_TAGS = 'form-multi-select-selection-tags'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_TAG = 'form-multi-select-tag'\nconst CLASS_NAME_TAG_DELETE = 'form-multi-select-tag-delete'\n\nconst CLASS_NAME_LABEL = 'label'\n\nconst Default = {\n  cleaner: true,\n  disabled: false,\n  multiple: true,\n  placeholder: 'Select...',\n  options: false,\n  optionsMaxHeight: 'auto',\n  optionsStyle: 'checkbox',\n  search: false,\n  searchNoResultsLabel: 'No results found',\n  selectAll: true,\n  selectAllLabel: 'Select all options',\n  selectionType: 'tags',\n  selectionTypeCounterText: 'item(s) selected'\n}\n\nconst DefaultType = {\n  cleaner: 'boolean',\n  disabled: 'boolean',\n  multiple: 'boolean',\n  placeholder: 'string',\n  options: '(boolean|array)',\n  optionsMaxHeight: '(number|string)',\n  optionsStyle: 'string',\n  search: 'boolean',\n  searchNoResultsLabel: 'string',\n  selectAll: 'boolean',\n  selectAllLabel: 'string',\n  selectionType: 'string',\n  selectionTypeCounterText: 'string'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass MultiSelect extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._selectAllElement = null\n    this._selectionElement = null\n    this._selectionCleanerElement = null\n    this._searchElement = null\n    this._optionsElement = null\n    this._clone = null\n    this._options = this._getOptions()\n    this._search = ''\n    this._selection = this._getSelectedOptions(this._options)\n\n    if (this._config.options.length > 0) {\n      this._createNativeSelect(this._config.options)\n    }\n\n    this._createSelect()\n    this._addEventListeners()\n    Data.set(this._element, DATA_KEY, this)\n  }\n\n  // Getters\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get DATA_KEY() {\n    return DATA_KEY\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n\n  show() {\n    EventHandler.trigger(this._element, EVENT_SHOW)\n    this._clone.classList.add(CLASS_NAME_SHOW)\n\n    if (this._config.search) {\n      SelectorEngine.findOne(SELECTOR_INPUT, this._clone).focus()\n    }\n\n    EventHandler.trigger(this._element, EVENT_SHOWN)\n  }\n\n  hide() {\n    EventHandler.trigger(this._element, EVENT_HIDE)\n    this._clone.classList.remove(CLASS_NAME_SHOW)\n    EventHandler.trigger(this._element, EVENT_HIDDEN)\n  }\n\n  search(text) {\n    this._search = text.length > 0 ? text.toLowerCase() : text\n    this._filterOptionsList()\n    EventHandler.trigger(this._element, EVENT_SEARCH)\n  }\n\n  update(config) {\n    this._config = this._getConfig(config)\n    this._options = this._getOptions()\n    this._selection = this._getSelectedOptions(this._options)\n    this._clone.remove()\n    this._element.innerHTML = ''\n    this._createNativeOptions(this._element, this._options)\n    this._createSelect()\n    this._addEventListeners()\n  }\n\n  selectAll(options = this._options) {\n    for (const option of options) {\n      if (option.disabled) {\n        continue\n      }\n\n      if (option.label) {\n        this.selectAll(option.options)\n        continue\n      }\n\n      this._selectOption(option.value, option.text)\n    }\n  }\n\n  deselectAll(options = this._options) {\n    for (const option of options) {\n      if (option.disabled) {\n        continue\n      }\n\n      if (option.label) {\n        this.deselectAll(option.options)\n        continue\n      }\n\n      this._deselectOption(option.value)\n    }\n  }\n\n  getValue() {\n    return this._selection\n  }\n\n  // Private\n\n  _addEventListeners() {\n    EventHandler.on(this._clone, EVENT_CLICK, () => {\n      if (!this._config.disabled) {\n        this.show()\n      }\n    })\n\n    EventHandler.on(this._searchElement, EVENT_KEYUP, () => {\n      this._onSearchChange(this._searchElement)\n    })\n\n    EventHandler.on(this._searchElement, EVENT_KEYDOWN, event => {\n      const key = event.keyCode || event.charCode\n\n      if ((key === 8 || key === 46) && event.target.value.length === 0) {\n        this._deselectLastOption()\n      }\n    })\n\n    EventHandler.on(this._selectAllElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this.selectAll()\n    })\n\n    EventHandler.on(this._optionsElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this._onOptionsClick(event.target)\n    })\n\n    EventHandler.on(this._selectionCleanerElement, EVENT_CLICK, event => {\n      if (!this._config.disabled) {\n        event.preventDefault()\n        event.stopPropagation()\n        this.deselectAll()\n      }\n    })\n\n    EventHandler.on(this._optionsElement, EVENT_KEYDOWN, event => {\n      const key = event.keyCode || event.charCode\n\n      if (key === 13) {\n        this._onOptionsClick(event.target)\n        SelectorEngine.findOne(SELECTOR_INPUT, this._clone).focus()\n      }\n    })\n  }\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {})\n    }\n\n    return config\n  }\n\n  _getClassNames() {\n    return [...this._element.classList.value.split(' ')]\n  }\n\n  _getOptions(node = this._element) {\n    if (this._config.options) {\n      return this._config.options\n    }\n\n    const nodes = Array.from(node.childNodes).filter(element => element.nodeName === 'OPTION' || element.nodeName === 'OPTGROUP')\n    const options = []\n\n    for (const node of nodes) {\n      if (node.nodeName === 'OPTION') {\n        options.push({\n          value: node.value,\n          text: node.innerHTML,\n          selected: node.selected,\n          disabled: node.disabled\n        })\n      }\n\n      if (node.nodeName === 'OPTGROUP') {\n        options.push({\n          label: node.label,\n          options: this._getOptions(node)\n        })\n      }\n    }\n\n    return options\n  }\n\n  _getSelectedOptions(options) {\n    const selected = []\n\n    for (const e of options) {\n      if (typeof e.value === 'undefined') {\n        this._getSelectedOptions(e.options)\n        continue\n      }\n\n      if (e.selected) {\n        // Add only the last option if single select\n        if (!this._config.multiple) {\n          selected.length = 0\n        }\n\n        selected.push({\n          value: String(e.value),\n          text: e.text\n        })\n      }\n    }\n\n    return selected\n  }\n\n  _createNativeSelect(data) {\n    this._element.classList.add(CLASS_NAME_SELECT)\n\n    if (this._config.multiple) {\n      this._element.setAttribute('multiple', true)\n    }\n\n    this._createNativeOptions(this._element, data)\n  }\n\n  _createNativeOptions(parentElement, options) {\n    for (const option of options) {\n      if ((typeof option.options !== 'undefined')) {\n        const optgroup = document.createElement('optgroup')\n        optgroup.label = option.label\n        this._createNativeOptions(optgroup, option.options)\n        parentElement.append(optgroup)\n      } else {\n        const opt = document.createElement('OPTION')\n        opt.value = option.value\n\n        if (option.disabled === true) {\n          opt.setAttribute('disabled', 'disabled')\n        }\n\n        if (option.selected === true) {\n          opt.setAttribute('selected', 'selected')\n        }\n\n        opt.innerHTML = option.text\n        parentElement.append(opt)\n      }\n    }\n  }\n\n  _hideNativeSelect() {\n    this._element.tabIndex = '-1'\n    this._element.style.display = 'none'\n  }\n\n  _createSelect() {\n    const div = document.createElement('div')\n    div.classList.add(CLASS_NAME_SELECT)\n\n    if (this._config.disabled) {\n      this._element.classList.add(CLASS_NAME_DISABLED)\n    }\n\n    for (const className of this._getClassNames()) {\n      div.classList.add(className)\n    }\n\n    if (this._config.multiple) {\n      div.classList.add(CLASS_NAME_SELECT_MULTIPLE)\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'tags') {\n      div.classList.add(CLASS_NAME_SELECTION_TAGS)\n    }\n\n    this._clone = div\n    this._element.parentNode.insertBefore(div, this._element.nextSibling)\n    this._createSelection()\n    this._createSelectionCleaner()\n\n    if (this._config.search) {\n      this._createSearchInput()\n      this._updateSearch()\n    }\n\n    if (this._element.id) {\n      this._element.setAttribute('name', `multi-select-${this._element.id}`)\n    }\n\n    this._createOptionsContainer()\n    this._hideNativeSelect()\n    this._updateOptionsList()\n  }\n\n  _createSelection() {\n    const span = document.createElement('span')\n    span.classList.add(CLASS_NAME_SELECTION)\n    this._clone.append(span)\n\n    this._updateSelection()\n    this._selectionElement = span\n  }\n\n  _createSelectionCleaner() {\n    if (this._config.cleaner && this._config.multiple) {\n      const cleaner = document.createElement('button')\n      cleaner.classList.add(CLASS_NAME_SELECTION_CLEANER)\n      cleaner.style.display = 'none'\n      this._clone.append(cleaner)\n      this._clone.classList.add(CLASS_NAME_SELECT_WITH_CLEANER)\n\n      this._updateSelectionCleaner()\n      this._selectionCleanerElement = cleaner\n    }\n  }\n\n  _createSearchInput() {\n    const input = document.createElement('input')\n    input.classList.add(CLASS_NAME_SEARCH)\n\n    if (this._config.disabled) {\n      input.disabled = true\n    }\n\n    this._searchElement = input\n    this._updateSearchSize()\n\n    this._clone.append(input)\n  }\n\n  _createOptionsContainer() {\n    const dropdownDiv = document.createElement('div')\n    dropdownDiv.classList.add(CLASS_NAME_SELECT_DROPDOWN)\n\n    if (this._config.selectAll && this._config.multiple) {\n      const selectAll = document.createElement('button')\n      selectAll.classList.add(CLASS_NAME_SELECT_ALL)\n      selectAll.innerHTML = this._config.selectAllLabel\n\n      this._selectAllElement = selectAll\n\n      dropdownDiv.append(selectAll)\n    }\n\n    const optionsDiv = document.createElement('div')\n    optionsDiv.classList.add(CLASS_NAME_OPTIONS)\n\n    if (this._config.optionsMaxHeight !== 'auto') {\n      optionsDiv.style.maxHeight = `${this._config.optionsMaxHeight}px`\n      optionsDiv.style.overflow = 'scroll'\n    }\n\n    dropdownDiv.append(optionsDiv)\n\n    this._clone.append(dropdownDiv)\n\n    this._createOptions(optionsDiv, this._options)\n    this._optionsElement = optionsDiv\n  }\n\n  _createOptions(parentElement, options) {\n    for (const option of options) {\n      if (typeof option.value !== 'undefined') {\n        const optionDiv = document.createElement('div')\n        optionDiv.classList.add(CLASS_NAME_OPTION)\n\n        if (option.disabled) {\n          optionDiv.classList.add(CLASS_NAME_DISABLED)\n        }\n\n        if (this._config.optionsStyle === 'checkbox') {\n          optionDiv.classList.add(CLASS_NAME_OPTION_WITH_CHECKBOX)\n        }\n\n        optionDiv.dataset.value = String(option.value)\n        optionDiv.tabIndex = 0\n        optionDiv.innerHTML = option.text\n        parentElement.append(optionDiv)\n      }\n\n      if (typeof option.label !== 'undefined') {\n        const optgroup = document.createElement('div')\n        optgroup.classList.add(CLASS_NAME_OPTGROUP)\n\n        const optgrouplabel = document.createElement('div')\n        optgrouplabel.innerHTML = option.label\n        optgrouplabel.classList.add(CLASS_NAME_OPTGROUP_LABEL)\n        optgroup.append(optgrouplabel)\n\n        this._createOptions(optgroup, option.options)\n        parentElement.append(optgroup)\n      }\n    }\n  }\n\n  _createTag(value, text) {\n    const tag = document.createElement('span')\n    tag.classList.add(CLASS_NAME_TAG)\n    tag.dataset.value = value\n    tag.innerHTML = text\n\n    const closeBtn = document.createElement('button')\n    closeBtn.classList.add(CLASS_NAME_TAG_DELETE, 'text-medium-emphasis')\n    closeBtn.setAttribute('aria-label', 'Close')\n    closeBtn.innerHTML = '<span aria-hidden=\"true\">&times;</span>'\n\n    tag.append(closeBtn)\n\n    EventHandler.on(closeBtn, EVENT_CLICK, event => {\n      if (!this._config.disabled) {\n        event.preventDefault()\n        event.stopPropagation()\n\n        tag.remove()\n        this._deselectOption(value)\n      }\n    })\n\n    return tag\n  }\n\n  _onOptionsClick(element) {\n    if (!element.classList.contains(CLASS_NAME_OPTION) || element.classList.contains(CLASS_NAME_LABEL)) {\n      return\n    }\n\n    const value = String(element.dataset.value)\n    const text = element.textContent\n\n    if (this._config.multiple && element.classList.contains(CLASS_NAME_SELECTED)) {\n      this._deselectOption(value)\n    } else if (this._config.multiple && !element.classList.contains(CLASS_NAME_SELECTED)) {\n      this._selectOption(value, text)\n    } else if (!this._config.multiple) {\n      this._selectOption(value, text)\n    }\n\n    if (!this._config.multiple) {\n      this.hide()\n      this.search('')\n      this._searchElement.value = null\n    }\n  }\n\n  _selectOption(value, text) {\n    if (!this._config.multiple) {\n      this.deselectAll()\n    }\n\n    if (this._selection.filter(e => e.value === value).length === 0) {\n      this._selection.push({\n        value,\n        text\n      })\n    }\n\n    const nativeOption = SelectorEngine.findOne(`option[value=\"${value}\"]`, this._element)\n\n    if (nativeOption) {\n      nativeOption.selected = true\n    }\n\n    const option = SelectorEngine.findOne(`[data-value=\"${value}\"]`, this._optionsElement)\n    if (option) {\n      option.classList.add(CLASS_NAME_SELECTED)\n    }\n\n    EventHandler.trigger(this._element, EVENT_CHANGED, {\n      value: this._selection\n    })\n\n    this._updateSelection()\n    this._updateSelectionCleaner()\n    this._updateSearch()\n    this._updateSearchSize()\n  }\n\n  _deselectOption(value) {\n    const selected = this._selection.filter(e => e.value !== value)\n    this._selection = selected\n\n    SelectorEngine.findOne(`option[value=\"${value}\"]`, this._element).selected = false\n\n    const option = SelectorEngine.findOne(`[data-value=\"${value}\"]`, this._optionsElement)\n    if (option) {\n      option.classList.remove(CLASS_NAME_SELECTED)\n    }\n\n    EventHandler.trigger(this._element, EVENT_CHANGED, {\n      value: this._selection\n    })\n\n    this._updateSelection()\n    this._updateSelectionCleaner()\n    this._updateSearch()\n    this._updateSearchSize()\n  }\n\n  _deselectLastOption() {\n    if (this._selection.length > 0) {\n      const last = this._selection.pop()\n      this._deselectOption(last.value)\n    }\n  }\n\n  _updateSelection() {\n    const selection = SelectorEngine.findOne(SELECTOR_SELECTION, this._clone)\n\n    if (this._config.multiple && this._config.selectionType === 'counter') {\n      selection.innerHTML = `${this._selection.length} ${this._config.selectionTypeCounterText}`\n      return\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'tags') {\n      selection.innerHTML = ''\n      for (const e of this._selection) {\n        selection.append(this._createTag(e.value, e.text))\n      }\n\n      return\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'text') {\n      selection.innerHTML = this._selection.map(e => e.text).join(', ')\n      return\n    }\n\n    if (this._selection.length > 0) {\n      selection.innerHTML = this._selection[0].text\n    }\n  }\n\n  _updateSelectionCleaner() {\n    if (!this._config.cleaner || this._selectionCleanerElement === null) {\n      return\n    }\n\n    const selectionCleaner = SelectorEngine.findOne(SELECTOR_SELECTION_CLEANER, this._clone)\n\n    if (this._selection.length > 0) {\n      selectionCleaner.style.removeProperty('display')\n      return\n    }\n\n    selectionCleaner.style.display = 'none'\n  }\n\n  _updateSearch() {\n    if (!this._config.search) {\n      return\n    }\n\n    if (this._selection.length > 0 && !this._config.multiple) {\n      this._searchElement.placeholder = this._selection[0].text\n      this._selectionElement.style.display = 'none'\n      return\n    }\n\n    if (this._selection.length > 0 && this._config.multiple && this._config.selectionType !== 'counter') {\n      this._searchElement.removeAttribute('placeholder')\n      this._selectionElement.style.removeProperty('display')\n      return\n    }\n\n    if (this._selection.length === 0 && this._config.multiple) {\n      this._searchElement.placeholder = this._config.placeholder\n      this._selectionElement.style.display = 'none'\n      return\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'counter') {\n      this._searchElement.placeholder = `${this._selection.length} item(s) selected`\n      this._selectionElement.style.display = 'none'\n    }\n  }\n\n  _updateSearchSize(size = 2) {\n    if (!this._searchElement || !this._config.multiple) {\n      return\n    }\n\n    if (this._selection.length > 0 && (this._config.selectionType === 'tags' || this._config.selectionType === 'text')) {\n      this._searchElement.size = size\n      return\n    }\n\n    if (this._selection.length === 0 && (this._config.selectionType === 'tags' || this._config.selectionType === 'text')) {\n      this._searchElement.removeAttribute('size')\n    }\n  }\n\n  _onSearchChange(element) {\n    if (element) {\n      this.search(element.value)\n\n      this._updateSearchSize(element.value.length + 1)\n    }\n  }\n\n  _updateOptionsList(options = this._options) {\n    for (const option of options) {\n      if (option.label) {\n        this._updateOptionsList(option.options)\n        continue\n      }\n\n      if (option.selected) {\n        this._selectOption(option.value, option.text)\n      }\n    }\n  }\n\n  _isVisible(element) {\n    const style = window.getComputedStyle(element)\n    return (style.display !== 'none')\n  }\n\n  _filterOptionsList() {\n    const options = SelectorEngine.find(SELECTOR_OPTION, this._clone)\n    let visibleOptions = 0\n\n    for (const option of options) {\n      // eslint-disable-next-line unicorn/prefer-includes\n      if (option.textContent.toLowerCase().indexOf(this._search) === -1) {\n        option.style.display = 'none'\n      } else {\n        option.style.removeProperty('display')\n        visibleOptions++\n      }\n\n      const optgroup = option.closest(SELECTOR_OPTGROUP)\n      if (optgroup) {\n        // eslint-disable-next-line  unicorn/prefer-array-some\n        if (SelectorEngine.children(optgroup, SELECTOR_OPTION).filter(element => this._isVisible(element)).length > 0) {\n          optgroup.style.removeProperty('display')\n        } else {\n          optgroup.style.display = 'none'\n        }\n      }\n    }\n\n    if (visibleOptions > 0) {\n      if (SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._clone)) {\n        SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._clone).remove()\n      }\n\n      return\n    }\n\n    if (visibleOptions === 0) {\n      const placeholder = document.createElement('div')\n      placeholder.classList.add(CLASS_NAME_OPTIONS_EMPTY)\n      placeholder.innerHTML = this._config.searchNoResultsLabel\n\n      if (!SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._clone)) {\n        SelectorEngine.findOne(SELECTOR_OPTIONS, this._clone).append(placeholder)\n      }\n    }\n  }\n\n  // Static\n\n  static multiSelectInterface(element, config) {\n    const data = MultiSelect.getOrCreateInstance(element, config)\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      MultiSelect.multiSelectInterface(this, config)\n    })\n  }\n\n  static clearMenus(event) {\n    if (event && (event.button === RIGHT_MOUSE_BUTTON ||\n      (event.type === 'keyup' && event.key !== TAB_KEY))) {\n      return\n    }\n\n    const selects = SelectorEngine.find(SELECTOR_SELECT)\n\n    for (let i = 0, len = selects.length; i < len; i++) {\n      const context = Data.get(selects[i], DATA_KEY)\n      const relatedTarget = {\n        relatedTarget: selects[i]\n      }\n\n      if (event && event.type === 'click') {\n        relatedTarget.clickEvent = event\n      }\n\n      if (!context) {\n        continue\n      }\n\n      if (!context._clone.classList.contains(CLASS_NAME_SHOW)) {\n        continue\n      }\n\n      if (context._clone.contains(event.target)) {\n        continue\n      }\n\n      context._clone.classList.remove(CLASS_NAME_SHOW)\n\n      EventHandler.trigger(context._element, EVENT_HIDDEN)\n    }\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const ms of SelectorEngine.find(SELECTOR_SELECT)) {\n    if (ms.tabIndex !== -1) {\n      MultiSelect.multiSelectInterface(ms)\n    }\n  }\n})\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, MultiSelect.clearMenus)\nEventHandler.on(document, EVENT_KEYUP_DATA_API, MultiSelect.clearMenus)\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .MultiSelect to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(MultiSelect)\n\nexport default MultiSelect\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","TAB_KEY","RIGHT_MOUSE_BUTTON","SELECTOR_INPUT","SELECTOR_OPTGROUP","SELECTOR_OPTION","SELECTOR_OPTIONS","SELECTOR_OPTIONS_EMPTY","SELECTOR_SELECT","SELECTOR_SELECTION","SELECTOR_SELECTION_CLEANER","EVENT_CHANGED","EVENT_CLICK","EVENT_HIDE","EVENT_HIDDEN","EVENT_KEYDOWN","EVENT_KEYUP","EVENT_SEARCH","EVENT_SHOW","EVENT_SHOWN","EVENT_CLICK_DATA_API","EVENT_KEYUP_DATA_API","EVENT_LOAD_DATA_API","CLASS_NAME_DISABLED","CLASS_NAME_SELECT","CLASS_NAME_SELECT_DROPDOWN","CLASS_NAME_SELECT_MULTIPLE","CLASS_NAME_SELECT_WITH_CLEANER","CLASS_NAME_SELECT_ALL","CLASS_NAME_OPTGROUP","CLASS_NAME_OPTGROUP_LABEL","CLASS_NAME_OPTION","CLASS_NAME_OPTION_WITH_CHECKBOX","CLASS_NAME_OPTIONS","CLASS_NAME_OPTIONS_EMPTY","CLASS_NAME_SEARCH","CLASS_NAME_SELECTED","CLASS_NAME_SELECTION","CLASS_NAME_SELECTION_CLEANER","CLASS_NAME_SELECTION_TAGS","CLASS_NAME_SHOW","CLASS_NAME_TAG","CLASS_NAME_TAG_DELETE","CLASS_NAME_LABEL","Default","cleaner","disabled","multiple","placeholder","options","optionsMaxHeight","optionsStyle","search","searchNoResultsLabel","selectAll","selectAllLabel","selectionType","selectionTypeCounterText","DefaultType","MultiSelect","BaseComponent","constructor","element","config","_selectAllElement","_selectionElement","_selectionCleanerElement","_searchElement","_optionsElement","_clone","_options","_getOptions","_search","_selection","_getSelectedOptions","_config","length","_createNativeSelect","_createSelect","_addEventListeners","Data","set","_element","show","EventHandler","trigger","classList","add","SelectorEngine","findOne","focus","hide","remove","text","toLowerCase","_filterOptionsList","update","_getConfig","innerHTML","_createNativeOptions","option","label","_selectOption","value","deselectAll","_deselectOption","getValue","on","_onSearchChange","event","key","keyCode","charCode","target","_deselectLastOption","preventDefault","stopPropagation","_onOptionsClick","Manipulator","getDataAttributes","_getClassNames","split","node","nodes","Array","from","childNodes","filter","nodeName","push","selected","e","String","data","setAttribute","parentElement","optgroup","document","createElement","append","opt","_hideNativeSelect","tabIndex","style","display","div","className","parentNode","insertBefore","nextSibling","_createSelection","_createSelectionCleaner","_createSearchInput","_updateSearch","id","_createOptionsContainer","_updateOptionsList","span","_updateSelection","_updateSelectionCleaner","input","_updateSearchSize","dropdownDiv","optionsDiv","maxHeight","overflow","_createOptions","optionDiv","dataset","optgrouplabel","_createTag","tag","closeBtn","contains","textContent","nativeOption","last","pop","selection","map","join","selectionCleaner","removeProperty","removeAttribute","size","_isVisible","window","getComputedStyle","find","visibleOptions","indexOf","closest","children","multiSelectInterface","getOrCreateInstance","TypeError","jQueryInterface","each","clearMenus","button","type","selects","i","len","context","get","relatedTarget","ms","defineJQueryPlugin"],"mappings":"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"}